#!/bin/bash
# Stop AeroSpace, SketchyBar, Borders, and SwipeAeroSpace

echo "ðŸ›‘ Stopping Makaron UI components..."
echo ""

# Disable AeroSpace (doesn't quit, just disables window management)
if command -v aerospace &> /dev/null; then
    if pgrep -f "AeroSpace" > /dev/null; then
        echo "  Disabling AeroSpace..."
        aerospace enable off
        echo "  âœ“ AeroSpace disabled"
    else
        echo "  âš ï¸  AeroSpace not running"
    fi
else
    echo "  âš ï¸  AeroSpace not installed"
fi

# Stop SketchyBar service
if command -v sketchybar &> /dev/null; then
    if brew services list | grep -q "sketchybar.*started"; then
        echo "  Stopping SketchyBar..."
        brew services stop sketchybar 2>/dev/null
        echo "  âœ“ SketchyBar stopped"
    else
        echo "  âš ï¸  SketchyBar not running"
    fi
else
    echo "  âš ï¸  SketchyBar not installed"
fi

# Stop Borders service
if command -v borders &> /dev/null; then
    if brew services list | grep -q "borders.*started"; then
        echo "  Stopping Borders..."
        brew services stop borders 2>/dev/null
        echo "  âœ“ Borders stopped"
    else
        echo "  âš ï¸  Borders not running"
    fi
else
    echo "  âš ï¸  Borders not installed"
fi

# Quit SwipeAeroSpace
if [ -d "/Applications/SwipeAeroSpace.app" ]; then
    if pgrep -f "SwipeAeroSpace" > /dev/null; then
        echo "  Quitting SwipeAeroSpace..."
        killall SwipeAeroSpace 2>/dev/null
        echo "  âœ“ SwipeAeroSpace quit"
    else
        echo "  âš ï¸  SwipeAeroSpace not running"
    fi
fi

# Show menu bar (disable autohide)
echo "  Showing macOS menu bar..."
defaults write NSGlobalDomain _HIHideMenuBar -bool false
killall SystemUIServer 2>/dev/null || true
killall Dock 2>/dev/null || true
echo "  âœ“ Menu bar visible (may require logout/login for full effect)"

echo ""
echo "âœ… UI components stopped. Use 'makaron-ui-start' to re-enable."

